## MySQL有多种数据库引擎，最主要包括MyISAM和InnoDB，MyISAM不支持事务和外键，支持全文索引，而InnoDB在MySQL5.6版本以后才支持全文索引，他们的索引的实现方式也有差异，虽然都是B+树索引，但是MyISAM的索引是索引与数据文件分离，存储的是记录的地址，而InnoDB的表数据本身就是索引，key是表的主键，因此InnoDB必须要有主键，辅助索引都引用主键作为Data域，辅助索引先需要找到主键，然后通过主键到聚集索引中找相应的记录。
## 事务一般有四大特点（ACID）：原子性，一致性，隔离性和持久性，同时存在四种隔离级别：读未提交，读已提交，可重复读，串行化，在事务并发调度是，会存在三个问题：脏读，不可重复读和幻读，为了维护ACID，数据库一般使用加锁的方式，MySQL中的锁包括表锁和行锁，以及间隙锁，在MySQL锁中，存在一个多版本并发控制，简称为MVCC，其通过保存数据的多个版本来实现并发控制，当需要更新某条数据时，不会立即更新，而是创建一个该记录的新版本

## 数据库设计三大范式
* 1NF：数据表每一列不可拆分（原子性）
* 2NF：每一列都与主键相关（只描述一件事）
* 3NF：每张表都只与主键直接相关

Left join/Right join
使用事务保持数据一致性和完整性
Begin：
Commit
使用外键
在频繁进行排序分组的列上建立索引
### 事务
1. 原子性
2. 一致性
3. 隔离性
4. 持久性

> MVCC（多版本并发控制）：保存数据的多个版本来实现并发控制
> 当需要更新某条数据时，不会立即用新的数据覆盖原始数据，而是创建该记录的一个新的版本。（MySQL是悲观锁机制）


### 四种隔离级别
1. Serializable：串行化
2. Repeatable：可重复读
3. Read Committed：读已提交
4. Read Uncommitted：读未提交

### 事务并发调度问题
1. 脏读：读取未提交
2. 不可重复读：读取之前提交的
3. 幻读：读取之前提交的整批数据

### 数据库的锁：
1. 共享锁：读锁
2. 排他锁：写锁
3. 更新锁
4. 行级锁，表级锁

### MySQL数据库引擎
 MyISAM | InnoDB
 ---|:--:|---:
 不支持事务|支持
 不支持外键|支持
 支持全文索引|5.6以后版本支持
MySQL主备模式
主服务器会将每次改动写入到日志中
从服务器会读取日志并执行一遍
MySQL的特点：
* 核心完全多线程，支持多处理器
* 能够工作在不同的平台上
* 通过高度优化的类库实现SQL函数库并能够快速，查询初始化以后没有内存分配和内存泄漏

### 索引
* 普通索引：
* 唯一索引：
 * 聚集索引
 * 非聚集索引：查找到主键之后然后去聚集索引查找相应内容
* 联合索引
 * 联合主键索引
 * 联合唯一索引
 * 联合普通索引
*全文索引

MyISAM：索引与数据文件分离，索引仅仅保存记录地址
主键索引：叶节点的data存放的数据记录的地址，key唯一
辅助索引：key可以重复
InnoDB：表数据文件本身就是主索引，索引的key是数据表的主键（必须要有主键）辅助索引都引用主键作为data域
InnoDB表是基于聚簇索引建立的，辅助索引搜索需要检索两遍索引：首先检索辅助索引获得主键，然后用主键到主索引中检索获得记录。过长的主索引会导致辅助索引变得过大。
B+树磁盘读写代价更低，查询效率更加稳定，适合区间查找（叶子节点均相连）
